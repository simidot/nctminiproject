<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
 <mapper namespace="com.nctclub.mapper.AdminMapper">
  	<select id="selectAllusers" resultType="userDTO">
  		SELECT * FROM users
  	</select> 	
 	 
 	 <delete id = "deleteUser" parameterType = "String" >
 	 	DELETE FROM users WHERE userid = #{userId}
 	 </delete>
 	

<!-- Insert member -->
<insert id="insertMember" useGeneratedKeys="true" keyProperty="id" keyColumn="memberId">
   INSERT INTO nctmembers (memberId, name, birthdate, nationality, position, mbti, image, regdate)
   VALUES (nctmembers_seq.NEXTVAL, #{name}, #{birthdate}, #{nationality}, #{position}, #{mbti}, #{image}, SYSDATE)
</insert>


<!-- 반복문을 통해 insert 하는 방법
<insert id="insertGroupsForMember" parameterType="map">
    INSERT INTO nctgroups (groupId, groupName, memberRefId)
    VALUES (NCTGROUPS_SEQ.NEXTVAL, #{group}, #{id, jdbcType=BIGINT})
</insert> 
-->

<!-- Insert groups for member -->
<insert id = "insertGroupsForMember" parameterType = "java.util.List">
INSERT INTO nctgroups (groupId, memberRefId, groupName) 
   SELECT NCTGROUPS_SEQ.NEXTVAL, #{id}, A.* FROM (
      <foreach collection = "groupList" item = "group" separator = "UNION ALL">
      SELECT #{group} FROM DUAL
      </foreach>) A
</insert>





 </mapper>
 