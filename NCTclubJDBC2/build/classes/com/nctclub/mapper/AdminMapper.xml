<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
 <mapper namespace="com.nctclub.mapper.AdminMapper">
  	<select id="selectAllusers" resultType="userDTO">
  		SELECT * FROM users
  	</select> 	
 	 
 	 <delete id = "deleteUser" parameterType = "String" >
 	 	DELETE FROM users WHERE userid = #{userId}
 	 </delete>
 	

<!-- Insert member -->
<insert id="insertMember">
   INSERT INTO nctmembers (memberId, name, birthdate, nationality, position, mbti, image, regdate)
   VALUES (nctmembers_seq.NEXTVAL, #{name}, #{birthdate}, #{nationality}, #{position}, #{mbti}, #{image}, SYSDATE)
</insert>

<insert id="insertGroupsForMember">
	<foreach collection="groupList" item="group" index="index" separator=" " open="INSERT ALL" close="SELECT * FROM DUAL">
       INTO nctgroups (groupId, groupName, memberRefId)
       VALUES (NCTGROUPS_SEQ.NEXTVAL, #{group}, (SELECT LAST_NUMBER FROM user_sequences WHERE sequence_name=upper('nctmembers_seq')))
   </foreach>
</insert>

 </mapper>
 